---
title: "Coursera - Regression Models course - Course Project 1"
author: "Martin Cote"
date: "May 24, 2015"
output: pdf_document
---

# Executive Summary

Using the "mtcars" dataset provided within the R environment, answering the following questions:

* Is an automatic or manual transmission better for MPG
* Quantify the MPG difference between automatic and manual transmissions

# Pre-Processing

Loading libraries (GGPLOT2 required);
Loading the required data ("mtcars", provided with R); and
Switching 'am' to a factor variable (for specific processing only).

**Note: All pre-processing is hidden.**

```{r echo=FALSE}
library(ggplot2)
data(mtcars)

# Understanding the data: (disabled for final report)
#dim(mtcars)
#names(mtcars)
#sapply(mtcars, class)
#head(mtcars, 10)

# Converting 'am' to a factor variable:
mtcars_f <- mtcars # backup
mtcars_f$am <- factor(mtcars_f$am, levels=c(0, 1), labels=c("Automatic", "Manual"))
```

# Exploratory Data Analysis

Is transmission (i.e. 'am', 0 = automatic and 1 = manual) a good predictor for the 'mpg'?  Using a plot to demonstrate the relation and the linear regression between the variables.

```{r echo=TRUE}
t.test(mtcars$am, mtcars$mpg, paired=FALSE, var.equal=FALSE)
```

We observe the p-value of the Student's Test Distribution is far below 0.05 which indicates there is a strong relation between Transmission (i.e. 'am') and MPG (i.e. 'mpg').

```{r echo=TRUE}
verInd <- c(1, 2, 3, 4, 5, 7, 10)
pairs(mtcars, verInd = verInd)

summary(lm(mpg ~ ., data = mtcars))
summary(lm(mpg ~ . -1, data = mtcars))

par(mfrow = c(2, 2))
fit <- lm(mpg ~ ., data = mtcars) # ?influence.measures
plot(fit)
library(car)
vif(fit)


```

No random variable are dropped, hence all of them adds information to the linear model.

# Predictions and Correlation

```{r echo=TRUE}
cor(mtcars$mpg, mtcars$am)
var(mtcars$mpg, mtcars$am)

# linear regression
fit <- lm(mpg ~ am, data = mtcars_f)
summary(fit)

```

Regression Model...

```{r echo=TRUE}
g = ggplot(data = mtcars, aes(x = am, y = mpg)) +
  geom_smooth(method = "lm", colour = "black") + # linear model regression
  scale_x_continuous(breaks = c(0, 1),
                     name = "Transmission",
                     labels = c("0" = "Automatic", "1" = "Manual")) +
  geom_point(size = 7, colour = "black", alpha = 0.4) + # black contour
  geom_point(size = 5, colour = "red", alpha = 0.4) + # red center
  ylab("MPG") +
  labs(title="Linear Regression Model") +
  theme_bw()
g
```


Studying the residual plot...

```{r echo=TRUE}
g = ggplot(data = mtcars_f, aes(x = am, y = resid(lm(mpg ~ am))) ) +
  geom_hline(yintercept = 0, size = 2) +
  geom_point(size = 7, colour = "black", alpha = 0.4) + # black contour
  geom_point(size = 5, colour = "red", alpha = 0.4) + # red center
  xlab("Transmission") +
  ylab("Residual") +
  labs(title="Verifying variability within the residuals") +
  theme_bw()
g
```

The residual plot seems to indicate a greater variability in MPG for a car with *manual* transmission (most likely due to the driver's skills and habits?  Further investigation would be required).
